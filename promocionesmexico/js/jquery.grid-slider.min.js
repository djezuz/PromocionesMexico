(function(e){var u="top";var m="bottom";var r="left";var o="right";var q="outside";var h="inside";var j=0.85;var t="normal";var a=600;var p=8000;var v=10;var f=50;var d=/[^\s]+\.(swf)/i;var G="Error Loading Content";var g={none:0,fade:1,h_slide:2,v_slide:3};var w={none:0,fade:1,slide:2};var x="switch_index";var z="update_num";var i="update_index";var y="update_idx_list";var F="update_buttons";var s="update_menu_buttons";var c="update_pane_buttons";var C="update_tiles";var n="open_pane";var l="close_pane";var E="lightbox_open";function D(I,H){this._numCols=b(H.num_cols,4);this._numRows=b(H.num_rows,2);this._margin=B(H.margin,10);this._tileWidth=b(H.tile_width,225);this._tileHeight=b(H.tile_height,150);this._tileMargin=B(H.tile_margin,5);this._tileBorder=B(H.tile_border,1);this._autoScale=H.auto_scale;this._autoCenter=H.auto_center;this._rotate=H.auto_rotate;this._delay=b(H.delay,p);this._mouseoverPause=window.Touch?false:H.mouseover_pause;this._effect=H.effect.toLowerCase();this._duration=b(H.duration,a);this._easing=H.easing;this._displayOverlay=H.display_panel;this._overlayDir=H.panel_direction;this._displayTimer=H.display_timer;this._displayButtons=H.display_dbuttons;this._mouseoverButtons=H.mouseover_dbuttons;this._displayNumInfo=H.display_numinfo;this._displayIndex=H.display_index;this._displayNum=H.display_number;this._displayPlayBtn=H.display_play;this._displayCaption=H.display_caption;this._mouseoverCaption=window.Touch?false:H.mouseover_caption;this._captionEffect=H.caption_effect.toLowerCase();this._captionPos=H.caption_position.toLowerCase();this._captionAlign=H.caption_align.toLowerCase();this._textWidth=b(H.caption_width,0);this._textHeight=b(H.caption_height,0);this._contNav=H.cont_nav;this._shuffle=H.shuffle;this._catIndex=B(H.category_index,0);this._multiCategory=H.multi_category;this._mousewheelScroll=H.mousewheel_scroll;this._formMethod=H.type.toUpperCase();this._$slider;this._$tilePanel;this._$mainBox;this._$tileBox;this._$prevBtn;this._$nextBtn;this._$cpanel;this._$lists;this._$currList;this._$tiles;this._$overlay;this._$contentFrame;this._$contentNum;this._$outerContent;this._$innerContent;this._$scrollbar;this._$thumb;this._$centerPanel;this._$indexPanel;this._$timer;this._$numInfo;this._$menuItems;this._$playBtn;this._$menuList;this._timerId;this._index;this._menuIndex;this._paneIndex;this._numDisplay;this._extX;this._extY;this._extWidth;this._extHeight;this._unitW;this._unitH;this._wPad;this._hPad;this._numPanes;this._frameHeight;this._slideCoord;this.init(I)}D.prototype.init=function(I){this._$slider=I.find(".g-slider");this._$tilePanel=this._$slider.find(">.tiles");this._$lists=this._$tilePanel.find(">ul");this._$tiles=this._$lists.find(">li");this._$tilePanel.wrap("<div class='main-box'><div class='tiles-box'></div></div>");this._$mainBox=this._$slider.find(">.main-box");$tileBox=this._$mainBox.find(">.tiles-box");if(!this._multiCategory){this.setNoCategory()}this._timerId=null;this._index=0;this._numDisplay=this._numCols*this._numRows;this._extY=this._extX=this._extHeight=this._extWidth=0;if(this._catIndex>this._$lists.size()-1){this._catIndex=0}this.initLists();this.initList(this._catIndex);this.initSlidePanel();this.initMenu();this.initCPanel();this.initOverlay();var H=this._$mainBox.height()+(this._displayTimer?this._$timer.height():0)+(this._$cpanel.is(":empty")?0:this._$cpanel.height());this._$slider.css({width:this._$mainBox.width(),height:H,paddingTop:this._margin,paddingLeft:this._margin,paddingRight:this._margin});this.changeCategory(this._catIndex);if(window.Touch){this._slideCoord={start:-1,end:-1};if(this._effect=="v_slide"){this._$tilePanel.bind("touchstart",{elem:this},this.touchVStart).bind("touchmove",{elem:this},this.touchVMove)}else{this._$tilePanel.bind("touchstart",{elem:this},this.touchStart).bind("touchmove",{elem:this},this.touchMove)}this._$tilePanel.bind("touchend",{elem:this},this.touchEnd)}else{if(this._mousewheelScroll){this._$tilePanel.bind("mousewheel",{elem:this},this.mousewheelScroll).bind("DOMMouseScroll",{elem:this},this.mousewheelScroll);this._$slider.bind("mousewheel",k).bind("DOMMouseScroll",k)}}if(this._mouseoverPause){this._$slider.bind("mouseenter",{elem:this},this.pause).bind("mouseleave",{elem:this},this.play)}e(document).bind(E,{elem:this},this.pause)};D.prototype.initLists=function(){this.initCaptions();this._$lists.css("opacity",0).data({init:false,index:0});for(var J=0;J<this._$lists.size();J++){var H=this._$lists.eq(J);var L=H.find(">li");var I=L.size();var K=Math.ceil(I/this._numDisplay);if(this._shuffle){L=this.shuffleItems(H)}H.data({items:L,numItems:I,numIndex:K,multi:K>1})}};D.prototype.initList=function(H){var I=this._$lists.eq(H);var O=I.find(">li");this.initItems(O);var N=I.data("numItems");this._unitW=O.outerWidth(true)*this._numCols;this._unitH=O.outerHeight(true)*this._numRows;for(var J=0;J<N;J+=this._numDisplay){I.append("<li class='sub'><ul class='sub'></ul></li>");var K=I.find(">li.sub:last-child");var L=K.find(">ul");K.css({width:this._unitW,height:this._unitH});L.css({width:this._unitW,height:this._unitH}).append(O.slice(J,J+this._numDisplay))}switch(g[this._effect]){case g.h_slide:I.css({width:I.data("numIndex")*this._unitW,height:this._unitH});break;case g.v_slide:I.css({width:this._unitW,height:I.data("numIndex")*this._unitH});break;default:I.css({width:this._unitW,height:this._unitH});var M=I.find(">li.sub");M.addClass("stack").not(":first").css("opacity",0);M.first().css("zIndex",1)}I.data("init",true)};D.prototype.initItems=function(O){var M=O.size();for(var L=0;L<M;L++){var I=O.eq(L);var K;var H=I.find(">a:first");if(H.size()==0){if(this._displayOverlay&&I.find(">.content").size()>0){I.data("type","static").css("cursor","pointer").bind("click",{elem:this,i:L},this.openOverlay)}else{I.click(k)}K=I.find(">img")}else{if(this._displayOverlay){if(I.find(">.content").size()>0){I.data("type","static")}else{var N=this.getContentType(H);var J=H.attr("href");I.data({type:N,url:(typeof J!="undefined")?J:""})}I.css("cursor","pointer").bind("click",{elem:this,i:L},this.openOverlay)}H.data("text",I.find(">div:first").html());K=H.find(">img")}if(K.size()>0){K.addClass("thumbnail");K[0].complete||K[0].readyState=="complete"?this.processImg(K):K.bind("load",{elem:this},this.processLoadedImg)}if(this._displayCaption&&this._captionPos==h){this.initCaption(I)}I.data({index:L,image:K})}O.css({width:this._tileWidth+this._extWidth,height:this._tileHeight+this._extHeight,marginRight:this._tileMargin,marginBottom:this._tileMargin,borderWidth:this._tileBorder}).hover(this.itemMouseover,this.itemMouseout)};D.prototype.initSlidePanel=function(){this._$tilePanel.css({width:this._unitW-this._tileMargin,height:this._unitH-this._tileMargin});this._$mainBox.width(this._$tilePanel.width())};D.prototype.initCaptions=function(){var H=this._$tiles.find(">div:not('.content'):first");if(this._displayCaption){H.addClass("caption");this._wPad=H.outerWidth()-H.width();this._hPad=H.outerHeight()-H.height();if(this._captionPos==q){switch(this._captionAlign){case r:H.height(this._tileHeight-this._hPad);this._textWidth=this.getTextWidth();H.css({width:this._textWidth,left:0});this._extX=this._extWidth=H.outerWidth();break;case o:H.height(this._tileHeight-this._hPad);this._textWidth=this.getTextWidth();H.css({width:this._textWidth,left:this._tileWidth});this._extWidth=H.outerWidth();break;case u:H.width(this._tileWidth-this._wPad);this._textHeight=this.getTextHeight();H.css({height:this._textHeight-this._hPad,top:0});this._extY=this._extHeight=H.outerHeight();break;default:H.width(this._tileWidth-this._wPad);this._textHeight=this.getTextHeight();H.css({height:this._textHeight-this._hPad,top:this._tileHeight});this._extHeight=H.outerHeight()}H.addClass("outside")}}else{H.hide()}};D.prototype.initCaption=function(H){var I=H.find(">div:not('.content'):first");if(I.size()==0||I.html()==""){I.remove();return}if(this._captionAlign==r||this._captionAlign==o){I.height(this._tileHeight-this._hPad).width(I.outerWidth()-this._wPad);if(this._textWidth>0){I.width(Math.min(this._textWidth-this._wPad,this._tileWidth-this._wPad))}I.css("left",this._captionAlign==r?0:this._tileWidth-I.outerWidth())}else{I.width(this._tileWidth-this._wPad);if(this._textHeight>0){I.height(Math.min(this._textHeight-this._hPad,this._tileHeight-this._hPad))}I.css("top",this._captionAlign==u?0:this._tileHeight-I.outerHeight())}if(this._mouseoverCaption){H.data("caption",I);switch(w[this._captionEffect]){case w.slide:if(this._captionAlign==r){H.data({textPos:0,textOff:-I.outerWidth()});I.css("left",H.data("textOff"));H.hover(this.slideInHText,this.slideOutHText)}else{if(this._captionAlign==o){H.data({textPos:this._tileWidth-I.outerWidth(),textOff:this._tileWidth});I.css("left",H.data("textOff"));H.hover(this.slideInHText,this.slideOutHText)}else{if(this._captionAlign==u){H.data({textPos:0,textOff:-I.outerHeight()});I.css("top",H.data("textOff"));H.hover(this.slideInVText,this.slideOutVText)}else{H.data({textPos:this._tileHeight-I.outerHeight(),textOff:this._tileHeight});I.css("top",H.data("textOff"));H.hover(this.slideInVText,this.slideOutVText)}}}break;case w.fade:if(!(jQuery.browser.msie&&parseInt(jQuery.browser.version)<9)){I.css("opacity",0);H.hover(this.fadeInText,this.fadeOutText);break}default:I.css("visibility","hidden");H.hover(this.showText,this.hideText)}}};D.prototype.getTextWidth=function(){if(this._textWidth==0){var H=this._$tiles.find(">div:not('.content'):first").map(function(){return e(this).outerWidth()}).get();this._textWidth=Math.max.apply(Math,H)}return this._textWidth};D.prototype.getTextHeight=function(){if(this._textHeight==0){var H=this._$tiles.find(">div:not('.content'):first").map(function(){return e(this).outerHeight()}).get();this._textHeight=Math.max.apply(Math,H)}return this._textHeight};D.prototype.showText=function(){e(this).data("caption").css("visibility","visible")};D.prototype.hideText=function(){e(this).data("caption").css("visibility","hidden")};D.prototype.fadeInText=function(){e(this).data("caption").stop(true).animate({opacity:1},"fast")};D.prototype.fadeOutText=function(){e(this).data("caption").stop(true).animate({opacity:0},"fast")};D.prototype.slideInVText=function(){e(this).data("caption").stop(true).animate({top:e(this).data("textPos")},"fast")};D.prototype.slideOutVText=function(){e(this).data("caption").stop(true).animate({top:e(this).data("textOff")},"fast")};D.prototype.slideInHText=function(){e(this).data("caption").stop(true).animate({left:e(this).data("textPos")},"fast")};D.prototype.slideOutHText=function(){e(this).data("caption").stop(true).animate({left:e(this).data("textOff")},"fast")};D.prototype.initMenu=function(I){if(this._$lists.size()>1){var P=this;var R="<div class='menu-bar'>								<div class='menu-panel'>									<ul class='menu'>";this._$lists.each(function(){R+="<li>"+e(this).attr("title")+"</li>"});R+="</ul>								</div>							</div>";$tileBox.prepend(R);var K=$tileBox.find(">.menu-bar");var H=K.find(">.menu-panel");K.width(this._$tilePanel.width()-(K.outerWidth()-K.width()));H.width(K.width());this._$menuList=H.find(">ul.menu");this._$menuItems=this._$menuList.find(">li");this._$menuItems.click(function(){var X=e(this).index();if(X!=P._$menuItems.filter(".selected").index()){P.changeCategory(X)}});var L=this._$menuItems.map(function(){return e(this).outerWidth()}).get();var Q=Math.max.apply(Math,L);var O=Math.round(H.width()/this._$menuItems.size());var T=this._$menuItems.outerWidth()-this._$menuItems.width();if(O<Q){K.append("<div class='menu-buttons'>									<div class='menu-back'></div>									<div class='menu-fwd'></div>								 </div>");var N=K.find(">.menu-buttons");var J=N.find(">.menu-back");var W=N.find(">.menu-fwd");H.width(H.width()-N.outerWidth());var S=Math.floor(H.width()/Q);if(S>0){var U=Math.round((1/S)*100)/100;this._$menuItems.width(Math.floor(U*H.width())-T)}else{this._$menuItems.css({paddingLeft:0,paddingRight:0});T=this._$menuItems.outerWidth()-this._$menuItems.width();this._$menuItems.width(H.width()-T);S=1}this._$menuList.width(this._$menuItems.size()*this._$menuItems.outerWidth());H.width(S*this._$menuItems.outerWidth());this._menuIndex=0;maxMenuIndex=this._$menuItems.size()-S;this._$slider.bind(s,function(){J.toggleClass("off",P._menuIndex==0);W.toggleClass("off",P._menuIndex==maxMenuIndex)});J.bind("click",{elem:this},this.menuBack);W.bind("click",{elem:this},this.menuFwd);if(window.Touch){var V={start:-1,end:-1};H.bind("touchstart",function(X){V.start=X.originalEvent.touches[0].pageX}).bind("touchmove",function(X){X.preventDefault();V.end=X.originalEvent.touches[0].pageX}).bind("touchend",function(){if(V.end>=0){if(Math.abs(V.start-V.end)>f){if(V.end<V.start){P.menuFwd()}else{P.menuBack()}}}V.start=V.end=-1})}else{if(this._mousewheelScroll){K.bind("mousewheel",{elem:this},this.scrollMenu).bind("DOMMouseScroll",{elem:this},this.scrollMenu)}}this._$slider.trigger(s)}else{var S=this._$menuItems.size();var U=Math.round((1/S)*100)/100;this._$menuItems.width(Math.floor(U*H.width())-T);var M=this._$menuItems.last();M.css("border","none").width(H.width()-((S-1)*this._$menuItems.outerWidth())-(M.outerWidth()-M.width()));this._$menuList.width(H.width())}}this._$lists.removeAttr("title")};D.prototype.menuBack=function(I){var H=(typeof I!="undefined")?I.data.elem:this;if(H._menuIndex>0){H._menuIndex--;H._$menuList.stop(true).animate({left:-H._$menuItems.eq(H._menuIndex).position().left},t);H._$slider.trigger(s)}};D.prototype.menuFwd=function(I){var H=(typeof I!="undefined")?I.data.elem:this;if(H._menuIndex<maxMenuIndex){H._menuIndex++;H._$menuList.stop(true).animate({left:-H._$menuItems.eq(H._menuIndex).position().left},t);H._$slider.trigger(s)}};D.prototype.scrollMenu=function(I){var H=I.data.elem;if(!H._$menuList.is(":animated")){var J=(typeof I.originalEvent.wheelDelta=="undefined")?-I.originalEvent.detail:I.originalEvent.wheelDelta;J>0?H.menuBack():H.menuFwd()}};D.prototype.initCPanel=function(){var H="<div class='timer-box'>							<div class='timer'></div>						</div>						<div class='cpanel'><div class='num-info'></div><div class='center-panel'><div class='index-panel'></div></div><div class='play-btn'></div></div>";this._$slider.append(H);this._$cpanel=this._$slider.find(">.cpanel");this._$centerPanel=this._$cpanel.find(">.center-panel");this._$indexPanel=this._$centerPanel.find(">.index-panel");this.initTimer();this.initDButtons();this.initNumInfo();this.initPlay();if(this._displayIndex){this._$indexPanel.data({maxWidth:this._$tilePanel.width()-((2*Math.max(this._$numInfo.width(),this._$playBtn.width()))+this._$centerPanel.find(">.s-prev").width()+this._$centerPanel.find(">.s-next").width()),scroll:false});this.initIndexes();if(this._$indexPanel.find(">ul.indexes").size()>0){this.initIndexScroll();this._$slider.bind(x,{elem:this},this.switchIndex)}else{this._$indexPanel.remove()}}else{this._$indexPanel.remove()}this._$slider.css("paddingBottom",0);if(this._$centerPanel.is(":empty")){this._$centerPanel.remove();if(!this._displayPlayBtn&&!this._displayNumInfo){this._$cpanel.remove();this._$slider.css("paddingBottom",this._margin)}}};D.prototype.initTimer=function(){var H=this._$slider.find(">.timer-box");this._$timer=H.find(">.timer");this._$timer.data("pct",1);if(!this._displayTimer){H.hide()}};D.prototype.initDButtons=function(){if(this._displayButtons){var H=this;if(this._mouseoverButtons){this._$slider.append("<div class='prev-btn'>&laquo;</div><div class='next-btn'>&raquo;</div>");this._$prevBtn=this._$slider.find(">.prev-btn");this._$nextBtn=this._$slider.find(">.next-btn");if(window.Touch){this._$prevBtn.css("left",0);this._$nextBtn.css("marginLeft",-this._$nextBtn.width())}else{this._$prevBtn.css("left",-(this._$prevBtn.width()+1));this._$nextBtn.css("marginLeft",1);this._$slider.hover(function(){H._$prevBtn.stop(true).animate({left:0},t);H._$nextBtn.stop(true).animate({marginLeft:-H._$nextBtn.width()},t)},function(){H._$prevBtn.stop(true).animate({left:-(H._$prevBtn.width()+1)},t);H._$nextBtn.stop(true).animate({marginLeft:1},t)})}}else{this._$prevBtn=e("<div class='s-prev'>&laquo;</div>");this._$nextBtn=e("<div class='s-next'>&raquo;</div>");this._$centerPanel.prepend(this._$prevBtn);this._$centerPanel.append(this._$nextBtn)}this._$prevBtn.bind("click",{elem:this},this.goBack).mousedown(k);this._$nextBtn.bind("click",{elem:this},this.goFwd).mousedown(k);if(!this._contNav){this._$slider.bind(F,function(){H._$prevBtn.toggleClass("off",H._index==0);H._$nextBtn.toggleClass("off",H._index==H._$currList.data("numIndex")-1)})}}};D.prototype.initNumInfo=function(){this._$numInfo=this._$cpanel.find(">.num-info");if(this._displayNumInfo){var H=this;this.setNumInfoSize();this._$slider.bind(z,function(){var L="";var K=H._$currList.data("numItems");if(K>0){var J=H._index*H._numDisplay;var I=Math.min(J+H._numDisplay,K);L=(J+1)+"-"+I+" of "+K}H._$numInfo.html(L)})}else{this._$numInfo.remove()}};D.prototype.setNumInfoSize=function(){var H=this._$lists.map(function(){return e(this).data("numItems")}).get();var J=A(Math.max.apply(Math,H));var K="";for(var I=0;I<J;I++){K+="0"}K+=("-"+K+" of "+K);this._$numInfo.html(K).width(this._$numInfo.width()).html("")};D.prototype.initPlay=function(){this._$playBtn=this._$cpanel.find(">.play-btn");if(this._displayPlayBtn){var H=this;this._$playBtn.toggleClass("pause",this._rotate).click(function(){H._rotate=!H._rotate;if(H._rotate){H._$playBtn.addClass("pause");H.startTimer()}else{H._$playBtn.removeClass("pause");H.pauseTimer()}return false})}else{this._$playBtn.remove()}};D.prototype.pause=function(I){var H=I.data.elem;H._rotate=false;H._$playBtn.removeClass("pause");H.pauseTimer()};D.prototype.play=function(I){var H=I.data.elem;H._rotate=true;H._$playBtn.addClass("pause");H.startTimer()};D.prototype.initIndexes=function(){for(var O=0;O<this._$lists.size();O++){var P=this._$lists.eq(O);var I=P.data("numIndex");if(I>1){var R="<ul class='indexes'>";for(var N=0;N<I;N++){var S=N*this._numDisplay;var M=Math.min(S+this._numDisplay,P.data("numItems"));R+="<li title='"+((S+1)+"-"+M)+"'>"+(N+1)+"</li>"}R+="</ul>";this._$indexPanel.append(R);var K=this._$indexPanel.find(">ul:last");var J=K.find(">li");if(this._displayNum){J.addClass("num").last().css("border","none")}else{J.empty()}var Q=this;J.click(function(){Q.resetTimer();Q._index=e(this).index();Q._$slider.trigger(C);return false}).mousedown(k);var L=J.outerWidth(true);K.width(J.size()*L);if(K.width()>this._$indexPanel.data("maxWidth")){var H=Math.floor(this._$indexPanel.data("maxWidth")/L)*L;K.data({width:H,range:H-K.width()});this._$indexPanel.data("scroll",true)}else{K.data({width:K.width(),range:0})}P.data("indexList",K);K.hide()}}};D.prototype.initIndexScroll=function(){this._$indexPanel.append("<div class='index-back'></div><div class='index-fwd'></div>");var H=this._$indexPanel.find(">.index-back");var J=this._$indexPanel.find(">.index-fwd");if(this._$indexPanel.data("scroll")){var I=this;if(!window.Touch){H.hover(function(){J.show();var L=I._$currList.data("indexList");var K=-L.stop(true).position().left*v;L.stop(true).animate({left:0},K,"linear",function(){H.hide()})},function(){I._$currList.data("indexList").stop(true)});J.hover(function(){H.show();var M=I._$currList.data("indexList");var K=M.data("range");var L=(-K+M.stop(true).position().left)*v;M.stop(true).animate({left:K},L,"linear",function(){J.hide()})},function(){I._$currList.data("indexList").stop(true)})}else{H.hide();J.hide()}this._$slider.bind(y,function(){var N=I._$currList.data("indexList");if(!N.is(":animated")){var L=N.find(">li").outerWidth(true);var K=N.data("range");var M=N.stop(true).position().left+(I._index*L);if(M<0||M>I._$indexPanel.width()-L){N.stop(true).animate({left:Math.max(-I._index*L,K)},t,function(){if(!window.Touch){e(this).position().left==0?H.hide():H.show();e(this).position().left==K?J.hide():J.show()}})}}})}};D.prototype.switchIndex=function(I){var H=I.data.elem;H._$slider.unbind(i);H._$indexPanel.find(">ul.indexes:visible").hide();if(H._$currList.data("multi")){var J=H._$currList.data("indexList");H._$indexPanel.width(J.data("width"));J.show();if(J.data("range")<0){H._$indexPanel.find(".index-back, .index-fwd").show()}else{H._$indexPanel.find(".index-back, .index-fwd").hide()}H._$slider.bind(i,function(){var K=J.find(">li");K.filter(".hl").removeClass("hl");K.eq(H._index).addClass("hl")})}};D.prototype.switchCtrls=function(){this._$slider.unbind(C);this._$slider.trigger(x);if(this._$currList.data("multi")){this._$centerPanel.show();this._$playBtn.show();if(this._displayButtons){this._$prevBtn.show();this._$nextBtn.show()}this._$centerPanel.width(this._$indexPanel.width()+this._$centerPanel.find(">.s-prev").width()+this._$centerPanel.find(">.s-next").width()).css("marginLeft",-this._$centerPanel.width()/2);switch(g[this._effect]){case g.h_slide:this._$slider.bind(C,{elem:this},this.scrollHTiles);break;case g.v_slide:this._$slider.bind(C,{elem:this},this.scrollVTiles);break;case g.fade:this._$slider.bind(C,{elem:this},this.fadeTiles);break;default:this._$slider.bind(C,{elem:this},this.showTiles)}}else{this._$centerPanel.hide();this._$playBtn.hide();if(this._displayButtons){this._$prevBtn.hide();this._$nextBtn.hide()}}};D.prototype.updateCtrls=function(){this._$slider.trigger(F).trigger(z).trigger(i).trigger(y)};D.prototype.initOverlay=function(){if(this._displayOverlay){var P=this;var Q="<div class='content-overlay'>								<div class='content-bar'>									<div class='content-prev'>&laquo;</div>									<div class='content-num'></div>									<div class='content-next'>&raquo;</div>									<div class='content-close'></div>								</div>								<div class='content-frame'>									<div class='outer-content'>										<div class='inner-content'></div>									</div>									<div class='scrollbar'>										<div class='thumb'></div>									</div>								</div>							</div>";this._$mainBox.height($tileBox.height());var O=this._$mainBox.width();var S=this._$mainBox.height();$tileBox.css({width:O,height:S}).append("<div class='inner-cover'></div>").wrap("<div class='content-strip'></div>");var I=this._$mainBox.find(">.content-strip");switch(this._overlayDir){case r:I.css({width:2*O,height:S,left:-O}).prepend(Q);this.bindPaneMove("left",0,-O);break;case o:I.css({width:2*O,height:S}).append(Q);this.bindPaneMove("left",-O,0);break;case u:I.css({width:O,height:2*S,top:-S}).prepend(Q);this.bindPaneMove("top",0,-S);break;default:I.css({width:O,height:2*S}).append(Q);this.bindPaneMove("top",-S,0)}this._$overlay=I.find(">.content-overlay").css({width:O,height:S});var J=this._$overlay.find(">.content-bar").bind("click",{elem:this},this.closeOverlay);var M=J.find(">.content-prev").bind("click",{elem:this},this.prevPane).mousedown(k);var K=J.find(">.content-next").bind("click",{elem:this},this.nextPane).mousedown(k);var L=J.find(">.content-close").bind("click",{elem:this},this.closeOverlay);this._$contentNum=J.find(">.content-num").click(k);if(!this._contNav){this._$slider.bind(c,function(){M.toggleClass("off",P._paneIndex==0);K.toggleClass("off",P._paneIndex==P._$currList.data("numItems")-1)})}this._$contentFrame=this._$overlay.find(">.content-frame");this._$outerContent=this._$contentFrame.find(">.outer-content");this._$innerContent=this._$outerContent.find(">.inner-content");this._$scrollbar=this._$contentFrame.find(">.scrollbar");this._$thumb=this._$scrollbar.find(">.thumb");this._frameHeight=this._$overlay.height()-(this._$contentFrame.outerHeight()-this._$contentFrame.height())-J.outerHeight();this._$contentFrame.css({width:this._$overlay.width()-(this._$contentFrame.outerWidth()-this._$contentFrame.width()),height:this._frameHeight});this._$thumb.click(k);try{this._$thumb.draggable({containment:"parent"}).bind("drag",function(){P._$innerContent.css({top:Math.round(-P._$thumb.position().top*P._$scrollbar.data("ratio"))})})}catch(R){}this._$scrollbar.click(function(V){var U=Math.round(((V.pageY-P._$scrollbar.offset().top)/P._$scrollbar.height())*100)/100;var W=-U*P._$scrollbar.data("range");P._$innerContent.stop(true).animate({top:W},t);P._$thumb.stop(true).animate({top:-W/P._$scrollbar.data("ratio")},t);return false});if(window.Touch){var N={start:0,end:0};var H;this._$outerContent.bind("touchstart",function(U){if(!P._$innerContent.is(":animated")){N.start=U.originalEvent.touches[0].pageY;H=P._$innerContent.position().top}}).bind("touchmove",function(W){W.preventDefault();var X=N.start-W.originalEvent.touches[0].pageY;var V=H-X;var U=-P._$scrollbar.data("range");if(V>0){V=0}else{if(V<U){V=U}}P._$innerContent.css("top",V);P._$thumb.css("top",-V/P._$scrollbar.data("ratio"))}).bind("touchend",function(){N.start=N.end=0})}else{if(this._mousewheelScroll){var T=Math.round(this._frameHeight/2);this._$contentFrame.bind("mousewheel",{elem:this,distance:T},this.scrollContent).bind("DOMMouseScroll",{elem:this,distance:T},this.scrollContent)}}}};D.prototype.scrollContent=function(J){var I=J.data.elem;var H=-I._$scrollbar.data("range");if(H<0){if(!I._$innerContent.is(":animated")){I._$innerContent.stop(true);var M;var L=(typeof J.originalEvent.wheelDelta=="undefined")?-J.originalEvent.detail:J.originalEvent.wheelDelta;var K=J.data.distance;if(L>0){M=Math.min(0,I._$innerContent.position().top+K)}else{M=Math.max(H,I._$innerContent.position().top-K)}I._$innerContent.animate({top:M},t);I._$thumb.stop(true).animate({top:-M/I._$scrollbar.data("ratio")},t)}}return false};D.prototype.bindPaneMove=function(L,K,J){var M=$tileBox.find(">.inner-cover").css("opacity",0).click(k);var I=this._$mainBox.find(">.content-strip");var O=this;var N={};N[L]=K;var H={};H[L]=J;this._$slider.bind(n,function(){M.show().stop(true).animate({opacity:1},t);I.stop(true,true).animate(N,t,O._easing)}).bind(l,function(){M.stop(true).animate({opacity:0},t);I.stop(true,true).animate(H,t,O._easing,function(){M.hide()})})};D.prototype.openOverlay=function(I){var H=I.data.elem;H.pauseTimer();H._paneIndex=I.data.i;H._numPanes=H._$currList.data("numItems");H.gotoPane(H._paneIndex);H._$slider.trigger(n);H._$cpanel.stop(true,true).fadeOut(t);H._$prevBtn.css("visibility","hidden");H._$nextBtn.css("visibility","hidden");return false};D.prototype.closeOverlay=function(I){var H=I.data.elem;H.startTimer();H._$slider.trigger(l);H._$innerContent.stop(true).animate({opacity:0},t);H._$cpanel.stop(true,true).fadeIn(t);H._$prevBtn.css("visibility","visible");H._$nextBtn.css("visibility","visible");return false};D.prototype.gotoPane=function(J){this._$thumb.stop(true).css("top",0);this._$innerContent.stop(true).css({opacity:0,top:0});this._$contentNum.html((J+1)+"/"+this._numPanes);var I=this._$currList.data("items").eq(J);this.getContent(I);var K=this._$innerContent.height();if(K>this._frameHeight){this._$outerContent.width(this._$contentFrame.width()-this._$scrollbar.outerWidth(true));this._$scrollbar.show();this._$thumb.css({height:Math.round((this._frameHeight/K)*this._$scrollbar.height())});var H=K-this._frameHeight;this._$scrollbar.data({ratio:H/(this._$scrollbar.height()-this._$thumb.height()),range:H})}else{this._$scrollbar.hide();this._$outerContent.width(this._$contentFrame.width());this._$scrollbar.data("range",0)}this._$slider.trigger(c)};D.prototype.prevPane=function(I){var H=I.data.elem;if(H._paneIndex>0){H._paneIndex--}else{if(H._contNav){H._paneIndex=H._numPanes-1}else{return false}}H.gotoPane(H._paneIndex);return false};D.prototype.nextPane=function(I){var H=I.data.elem;if(H._paneIndex<H._numPanes-1){H._paneIndex++}else{if(H._contNav){H._paneIndex=0}else{return false}}H.gotoPane(H._paneIndex);return false};D.prototype.getContent=function(P){var N=P.data("type");this._$outerContent.removeClass("loading");if(N=="static"){this._$innerContent.html(P.find(">.content").html()).animate({opacity:1},t);return}var I=P.data("url");var H=I;var L=I.indexOf("?");if(L>=0){H=I.substring(0,L)}if(N=="inline"){var J=e(H);if(J.size()>0){this._$innerContent.html(J.html()).animate({opacity:1},t)}else{this.displayError()}}else{if(N=="ajax"){var K=this;var O=(L>=0)?I.substring(L+1):"";this._$outerContent.addClass("loading");e.ajax({url:H,type:this._formMethod,data:O,success:function(R){K._$innerContent.html(R).animate({opacity:1},t);K._$outerContent.removeClass("loading")},error:function(){K.displayError()}})}else{if(N=="flash"){var M="<object type='application/x-shockwave-flash' data='"+I+"' width='100%' height='100%'>								<param name='movie' value='"+I+"'/>								<param name='allowFullScreen' value='true'/>								<param name='quality' value='high'/>								<param name='wmode' value='transparent'/>								<a href='http://www.adobe.com/go/getflash'><img src='http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif' alt='Get Adobe Flash player'/></a>							</object>";this._$innerContent.html(M).animate({opacity:1},t)}else{var K=this;this._$outerContent.addClass("loading");var Q=e("<iframe frameborder='0' hspace='0' scrolling='auto' width='"+this._$contentFrame.width()+"' height='"+this._$contentFrame.height()+"'></iframe>");this._$innerContent.html(Q).animate({opacity:1},t);Q.load(function(){K._$outerContent.removeClass("loading")}).attr("src",I)}}}};D.prototype.displayError=function(){this._$outerContent.removeClass("loading");this._$innerContent.html(G).animate({opacity:1},t)};D.prototype.changeCategory=function(I){this.resetTimer();if(I!=this._catIndex){this._$lists.eq(this._catIndex).stop(true,true).data("index",this._index).css("zIndex",0)}this._catIndex=I;try{this._$menuItems.filter(".selected").removeClass("selected");this._$menuItems.eq(this._catIndex).addClass("selected")}catch(H){}this._$currList=this._$lists.eq(this._catIndex);if(!this._$currList.data("init")){this.initList(this._$currList.index())}this._index=this._$currList.data("index");if(this._effect=="none"){this._$lists.not(":eq("+this._$currList.index()+")").css("opacity",0);this._$currList.css("zIndex",1).css("opacity",1)}else{var J=this;this._$currList.css("zIndex",1).stop(true,true).animate({opacity:1},t,function(){J._$lists.not(":eq("+e(this).index()+")").css("opacity",0)})}this.switchCtrls();this.updateCtrls();this.startTimer()};D.prototype.goBack=function(I){var H=(typeof I!="undefined")?I.data.elem:this;if(H._index>0){H._index--}else{if(H._contNav){H._index=H._$currList.data("numIndex")-1}else{return}}H.resetTimer();H._$slider.trigger(C)};D.prototype.goFwd=function(I){var H=(typeof I!="undefined")?I.data.elem:this;if(H._index<H._$currList.data("numIndex")-1){H._index++}else{if(H._contNav){H._index=0}else{return}}H.resetTimer();H._$slider.trigger(C)};D.prototype.showTiles=function(I){var H=I.data.elem;var J=H._$currList.find(">li.sub");J.css({opacity:0,zIndex:0});J.eq(H._index).css({opacity:1,zIndex:1});H.startTimer();H.updateCtrls()};D.prototype.fadeTiles=function(I){var H=I.data.elem;var J=H._$currList.find(">li.sub");J.css("zIndex",0).stop(true,true);J.eq(H._index).css({opacity:0,zIndex:1,visibility:"visible"}).stop(true,true).animate({opacity:1},H._duration,H._easing,function(){J.not(":eq("+e(this).index()+")").css("visibility","hidden");H.startTimer()});H.updateCtrls()};D.prototype.scrollHTiles=function(I){var H=I.data.elem;H._$currList.stop(true,true).animate({left:-H._index*H._unitW},H._duration,H._easing,function(){H.startTimer()});H.updateCtrls()};D.prototype.scrollVTiles=function(I){var H=I.data.elem;H._$currList.stop(true,true).animate({top:-H._index*H._unitH},H._duration,H._easing,function(){H.startTimer()});H.updateCtrls()};D.prototype.processLoadedImg=function(I){var H=I.data.elem;H.processImg(e(this))};D.prototype.processImg=function(H){if(this._autoScale){var I=H.height()/H.width();H.css({width:this._tileWidth,height:I*this._tileWidth});if(H.height()>this._tileHeight){I=1/I;H.css({width:I*this._tileHeight,height:this._tileHeight})}}if(this._autoCenter){H.css({left:this._extX+Math.round((this._tileWidth-H.width())/2),top:this._extY+Math.round((this._tileHeight-H.height())/2)})}else{H.css({left:this._extX,top:this._extY})}};D.prototype.itemMouseover=function(){e(this).data("image").stop(true).animate({opacity:j},t)};D.prototype.itemMouseout=function(){e(this).data("image").stop(true).animate({opacity:1},t,function(){if(jQuery.browser.msie){this.style.removeAttribute("filter")}})};D.prototype.startTimer=function(){if(this._rotate&&this._timerId==null&&this._$currList.data("multi")){var H=this;var I=Math.round(this._$timer.data("pct")*this._delay);this._$timer.stop(true).animate({width:0},I,"linear");this._timerId=setTimeout(function(){H.resetTimer();H._index=H._index<H._$currList.data("numIndex")-1?H._index+1:0;H._$slider.trigger(C)},I)}};D.prototype.pauseTimer=function(){clearTimeout(this._timerId);this._timerId=null;this._$timer.stop(true).data("pct",this._$timer.width()/this._$cpanel.width())};D.prototype.resetTimer=function(){clearTimeout(this._timerId);this._timerId=null;this._$timer.stop(true).width("100%").data("pct",1)};D.prototype.shuffleItems=function(J){var N=J.find(">li");var L=N.size();var I=N.toArray();for(var K=0;K<L;K++){var H=Math.floor(Math.random()*L);var M=I[K];I[K]=I[H];I[H]=M}for(var K=0;K<L;K++){J.append(I[K])}return J.find(">li")};D.prototype.setNoCategory=function(){var I=this._$lists.eq(0);for(var J=1;J<this._$lists.size();J++){var H=this._$lists.eq(J);I.append(H.find(">li"));H.remove()}this._$lists=this._$tilePanel.find(">ul");this._$tiles=this._$lists.find(">li")};D.prototype.mousewheelScroll=function(I){var H=I.data.elem;if(!H._$currList.is(":animated")){var J=(typeof I.originalEvent.wheelDelta=="undefined")?-I.originalEvent.detail:I.originalEvent.wheelDelta;J>0?H.goBack():H.goFwd()}return false};D.prototype.touchStart=function(H){H.data.elem._slideCoord.start=H.originalEvent.touches[0].pageX};D.prototype.touchMove=function(H){H.preventDefault();H.data.elem._slideCoord.end=H.originalEvent.touches[0].pageX};D.prototype.touchVStart=function(H){H.data.elem._slideCoord.start=H.originalEvent.touches[0].pageY};D.prototype.touchVMove=function(H){H.preventDefault();H.data.elem._slideCoord.end=H.originalEvent.touches[0].pageY};D.prototype.touchEnd=function(I){var H=I.data.elem;if(H._slideCoord.end>=0){if(Math.abs(H._slideCoord.start-H._slideCoord.end)>f){if(H._slideCoord.end<H._slideCoord.start){H.swipeFwd()}else{H.swipeBack()}}}H._slideCoord.start=H._slideCoord.end=-1};D.prototype.swipeBack=function(){if(this._index>0){this._index--;this.resetTimer();this._$slider.trigger(C)}};D.prototype.swipeFwd=function(){if(this._index<this._$currList.data("numIndex")-1){this._index++;this.resetTimer();this._$slider.trigger(C)}};D.prototype.getContentType=function(I){var H=I.attr("rel");if(typeof H!="undefined"){H=H.toLowerCase();if(H=="flash"||H=="inline"||H=="iframe"||H=="ajax"){return H}}var J=I.attr("href");if(typeof J!="undefined"){if(J.match(d)){return"flash"}if(J.indexOf("#")==0){return"inline"}}return"iframe"};function k(){return false}function b(H,I){if(!isNaN(H)&&H>0){return H}return I}function B(H,I){if(!isNaN(H)&&H>=0){return H}return I}function A(H){var I=1;H=Math.abs(H);H=parseInt(H/10);while(H>0){I++;H=parseInt(H/10)}return I}e.fn.gridSlider=function(J){var I={num_cols:4,num_rows:2,tile_width:225,tile_height:150,tile_margin:6,tile_border:1,margin:10,auto_scale:true,auto_center:true,auto_rotate:false,delay:p,mouseover_pause:false,effect:"h_slide",duration:a,easing:"",display_panel:true,panel_direction:m,display_timer:true,display_dbuttons:true,mouseover_dbuttons:true,display_numinfo:true,display_index:true,display_number:true,display_play:true,display_caption:true,mouseover_caption:true,caption_effect:"fade",caption_align:m,caption_position:h,caption_width:0,caption_height:0,cont_nav:true,shuffle:false,category_index:0,multi_category:true,mousewheel_scroll:true,type:"GET"};var H=e.extend(true,{},I,J);return this.each(function(){var K=new D(e(this),H)})}})(jQuery);